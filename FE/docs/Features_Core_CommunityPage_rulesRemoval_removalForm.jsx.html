<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Features/Core/CommunityPage/rulesRemoval/removalForm.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Features/Core/CommunityPage/rulesRemoval/removalForm.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState } from "react";
import { X } from "lucide-react";
import { userAxios } from "@/Utils/UserAxios";
import { toast } from "react-toastify";
import { useParams } from "react-router-dom";

/**
 * Renders a form for adding or editing a removal reason.
 *
 * @component
 * @param {Object} props - The component props.
 * @param {Function} props.onClose - Callback function to close the form.
 * @param {boolean} props.editing - Indicates if the form is in editing mode.
 * @param {Object} props.removal - The removal reason object being edited.
 * @param {number} props.index - The index of the removal reason in the list.
 * @param {Array} props.list - The list of removal reasons.
 * @param {Function} props.setlist - Callback function to update the list of removal reasons.
 * @returns {JSX.Element} The rendered RemovalForm component.
 */
export default function RemovalForm({ onClose, editing, removal, index, list, setlist }) {
    const [Removal, setRemoval] = useState(editing ? removal.title : "");
    const [Message, setMessage] = useState(editing ? removal.Message : "");
    const {community} = useParams();

    const submitDelete = () => {
        console.log(index);
        const updatedList = list.filter((rule, i) => i !== index);
        const pack = { rules: updatedList };

        console.log(pack);
        userAxios.patch(`${community}/api/edit_removal_reasons`, pack)
            .then(() => {
                toast.success("Removal reason deleted");
                setlist(updatedList);
                onClose(false);
            })
            .catch(error => {
                console.log(error);
                toast.error("Error deleting removal reason")});
    };

    const submitRemoval = () => {
        const newRule = {
          title: Removal,
          description: Message,
        };
      
        let updatedList;
        if (editing) {
          updatedList = list.map((rule, i) => (i === index ? newRule : rule));
        } else {
          updatedList = [...list, newRule];
        }
      
        const pack = { rules: updatedList };
      
        userAxios.patch(`${community}/api/edit_removal_reasons`, pack)
          .then(() =>{
          if(editing) toast.success("Removal reason edited");
          else toast.success("Removal reason added");
          setlist(updatedList);
          onClose(false);
          })
          .catch(error => {
            toast.error("Error adding Removal reason");
        });
      };

    return (
        &lt;>
            {(
                &lt;div className="relative z-50" aria-labelledby="modal-title" role="dialog" aria-modal="true">
                    &lt;div className="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity">&lt;/div>
                    &lt;div className="fixed inset-0 w-screen overflow-y-auto">
                        &lt;div className="flex min-h-full items-center justify-center p-4 text-center sm:items-center sm:p-0 ">
                            &lt;div role="createForm" className="relative transform w-80 h-3/4 bg-white rounded-lg text-left shadow-xl transition-all sm:my-8 sm:w-[410px] sm:max-w-lg">
                                &lt;div className="bg-white px-3 pb-4 pt-4 sm:pb-4 rounded-full">
                                    &lt;div className="flex justify-between">
                                        &lt;p className="font-medium text-md text-gray-900" id="modal-title">
                                            {!editing ? "Add new reason" : "Edit removal reason"}
                                        &lt;/p>
                                        &lt;X className="w-5 h-5 text-gray-500 hover:text-black" onClick={() => onClose(false)} />
                                    &lt;/div>
                                    &lt;hr className="my-2 font-light text-gray-900" />
                                    &lt;input type="text" maxLength={50} placeholder='Rule displayed (e.g. "no photos")' className="w-full p-2 h-12 border border-gray-500 border-opacity-25 rounded-md focus:border-blue-500 focus:outline-none" value={Removal} onChange={(e) => setRemoval(e.target.value)} />
                                    &lt;label className="text-xs my-3 mb-1 text-gray-400 font-semibold">{50 - Removal.length} Characters remaining&lt;/label>

                                    &lt;p className="text-md mt-3 font-semibold">Reason message:&lt;/p>
                                    &lt;p className="text-xs mb-2 text-gray-600 font-semibold">Hi u/username,&lt;/p>

                                    &lt;textarea maxLength={10000} placeholder='Write a message that will communitcate to the user why their post was removed.' className="w-full p-2 h-24 border border-gray-500 border-opacity-25 rounded-md focus:border-blue-500 focus:outline-none" value={Message} onChange={(e) => setMessage(e.target.value)} />
                                    &lt;label className="text-xs mb-1 text-gray-400 font-semibold">{10000 - Message.length} Characters remaining&lt;/label>

                                    &lt;div className="flex justify-between mt-4 p-3 h-16 -mx-3 -mb-4 rounded-b-lg bg-gray-200">
                                        {editing ? &lt;button className="ml-2 text-red-500 font-semibold hover:text-red-600" onClick={() => submitDelete()}>Delete&lt;/button> : &lt;div>&lt;/div>}
                                        &lt;div className={`flex gap-3`}>
                                            &lt;button className="p-2 px-4 font-bold text-sm border border-opacity-75 border-gray-600 rounded-full hover:border-black" onClick={() => onClose(false)}>Cancel&lt;/button>
                                            &lt;button className="p-2 px-4 font-bold text-sm rounded-full enabled:hover:bg-blue-500 enabled:bg-blue-600 text-white bg-gray-400" disabled={Removal.length == 0 || Message.length == 0} onClick={() => submitRemoval()}>Save&lt;/button>
                                        &lt;/div>
                                    &lt;/div>
                                &lt;/div>
                            &lt;/div>
                        &lt;/div>
                    &lt;/div>
                &lt;/div>
            )}
        &lt;/>
    )
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-ChatMessaging.html">ChatMessaging</a></li><li><a href="module-CheckButton.html">CheckButton</a></li><li><a href="module-ForgetPassword.html">ForgetPassword</a></li><li><a href="module-ForgetUsername.html">ForgetUsername</a></li><li><a href="module-LoginPage.html">LoginPage</a></li><li><a href="module-Settingpagelayout.html">Settingpagelayout</a></li><li><a href="module-Sidebar.html">Sidebar</a></li><li><a href="module-Tooltip.html">Tooltip</a></li><li><a href="module-feedSettings.html">feedSettings</a></li></ul><h3>Global</h3><ul><li><a href="global.html#CommunityContext">CommunityContext</a></li><li><a href="global.html#CommunityProvider">CommunityProvider</a></li><li><a href="global.html#HomeContext">HomeContext</a></li><li><a href="global.html#Layout">Layout</a></li><li><a href="global.html#Navofsetting">Navofsetting</a></li><li><a href="global.html#ProfileComments">ProfileComments</a></li><li><a href="global.html#SearchContext">SearchContext</a></li><li><a href="global.html#SearchProvider">SearchProvider</a></li><li><a href="global.html#Tab">Tab</a></li><li><a href="global.html#Tabs">Tabs</a></li><li><a href="global.html#ToggleButton">ToggleButton</a></li><li><a href="global.html#buttons">buttons</a></li><li><a href="global.html#isValidBest">isValidBest</a></li><li><a href="global.html#periods">periods</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Thu May 02 2024 19:27:34 GMT+0300 (Eastern European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
